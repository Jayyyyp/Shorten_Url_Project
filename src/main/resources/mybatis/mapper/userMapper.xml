<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.gamso.repository.UserRepository">
    <insert id="saveUser" parameterType="kr.gamso.dto.SaveUserDTO">
         INSERT INTO users (id, email, pw) VALUES (#{id}, #{email}, #{pw})
    </insert>
    <select id="selectUserId" parameterType="string" resultType="int">
        SELECT COUNT(id) FROM users WHERE id = #{id}
    </select>

    <select id="findAllUsers" resultType="kr.gamso.dto.FindUserDTO">
        SELECT
            id, email, pw
        FROM
            users
    </select>

    <select id="findUserById" resultType="kr.gamso.dto.FindUserByIdDTO">
        SELECT
            email, pw, id
        FROM
            users
        WHERE
            id = #{id}
    </select>

    <select id="getUserInfoById" resultType="kr.gamso.dto.UserInfoDTO">
        SELECT
            member_number as memberNumber,
            id,
            email,
            pw,
            signup_date as signupDate
        FROM
            users
        WHERE
            id = #{id}
    </select>

    <select id="getUrlInfoByMemberNumber" resultType="kr.gamso.dto.UrlInfoDTO">
        SELECT
            member_number as memberNumber,
            original_url as originalUrl,
            shorten_url as shortenUrl,
            shorten_date as shortenDate
        FROM
            url
        WHERE
            member_number  = #{memberNumber}
    </select>

</mapper>